
{% extends "base.html" %}

{% block title %}Topluluk Merkezi{% endblock %}

{% block content %}
<div class="container mt-5 pt-5">
    {% if info %}
    <div class="row mb-5 align-items-center">
        <div class="col-md-4">
            <img src="{{ info.image_url }}" class="img-fluid rounded shadow-sm" alt="Topluluk Resmi">
        </div>
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h1 class="display-4">{{ info.title }}</h1>
                    <p class="lead text-muted">{{ info.content }}</p>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="text-center mb-5">
        <h1 class="display-4">Topluluk Merkezine Hoş Geldiniz</h1>
        <p class="lead text-muted">Tartışmalara katılın, son haberleri okuyun ve etkinlikleri takip edin.</p>
    </div>
    {% endif %}

    <div class="row g-4">
        <!-- Forum Kartı -->
        <div class="col-md-4">
            <div class="card h-100 shadow-sm text-center">
                <div class="card-body d-flex flex-column justify-content-center">
                    <i class="fas fa-comments fa-3x mb-3 text-primary"></i>
                    <h5 class="card-title">Forum</h5>
                    <p class="card-text">Diğer üyelerle sohbet edin ve tartışmalara katılın.</p>
                    <a href="{{ url_for('community.index') }}" class="btn btn-primary mt-auto">Foruma Git</a>
                </div>
            </div>
        </div>

        <!-- Haberler Kartı -->
        <div class="col-md-4">
            <div class="card h-100 shadow-sm text-center">
                <div class="card-body d-flex flex-column justify-content-center">
                    <i class="fas fa-newspaper fa-3x mb-3 text-success"></i>
                    <h5 class="card-title">Haberler</h5>
                    <p class="card-text">En son anime ve topluluk haberlerini okuyun.</p>
                    <a href="{{ url_for('news') }}" class="btn btn-success mt-auto">Haberleri Oku</a>
                </div>
            </div>
        </div>

        <!-- Etkinlik Takvimi Kartı -->
        <div class="col-md-4">
            <div class="card h-100 shadow-sm text-center">
                <div class="card-body d-flex flex-column justify-content-center">
                    <i class="fas fa-calendar-alt fa-3x mb-3 text-warning"></i>
                    <h5 class="card-title">Etkinlik Takvimi</h5>
                    <p class="card-text">Gelecek etkinlikleri ve yayın tarihlerini görün.</p>
                    <a href="{{ url_for('events') }}" class="btn btn-warning mt-auto">Takvime Git</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Son Aktiviteler -->
    <div class="row mt-5">
        <!-- Son Konular -->
        <div class="col-md-6">
            <h4><i class="fas fa-fire me-2"></i>Son Forum Konuları</h4>
            <div class="list-group">
                {% for thread in latest_threads %}
                    <a href="{{ url_for('community.view_thread', thread_id=thread.id) }}" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1">{{ thread.title }}</h6>
                            <small>{{ thread.timestamp.strftime('%d-%m') }}</small>
                        </div>
                        <small class="text-muted">{{ thread.user_username }} tarafından</small>
                    </a>
                {% else %}
                    <p class="text-muted">Henüz konu yok.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Son Haberler -->
        <div class="col-md-6">
            <h4><i class="fas fa-bullhorn me-2"></i>Son Haberler</h4>
            <div class="list-group">
                {% for item in latest_news %}
                    <a href="{{ url_for('view_news', news_id=item.id) }}" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1">{{ item.title }}</h6>
                            <small>{{ item.timestamp.strftime('%d-%m') }}</small>
                        </div>
                        <small class="text-muted">{{ item.author.username }} tarafından</small>
                    </a>
                {% else %}
                    <p class="text-muted">Henüz haber yok.</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
